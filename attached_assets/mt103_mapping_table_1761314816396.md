# SWIFT MT103 to ISO 20022 (pacs.008.001.08) Mapping Table

## Complete Field Mapping with Transformation Logic

| Legacy Field | Description | ISO 20022 Element | ISO 20022 Path | Notes | Transformation Logic |
|--------------|-------------|-------------------|----------------|-------|---------------------|
| :20: | Transaction Reference | Message ID | /Document/FIToFICstmrCdtTrf/GrpHdr/MsgId | Unique ID for the payment | Direct copy. Must be unique identifier. |
| :20: | Transaction Reference | Instruction ID | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/PmtId/InstrId | Instruction identifier | Direct copy from :20: field |
| :20: | Transaction Reference | End-to-End ID | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/PmtId/EndToEndId | End-to-end identifier | Direct copy from :20: field |
| :20: | Transaction Reference | Transaction ID | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/PmtId/TxId | Transaction identifier | Direct copy from :20: field |
| :23B: | Bank Operation Code | Settlement Method | /Document/FIToFICstmrCdtTrf/GrpHdr/SttlmInf/SttlmMtd | CRED = Credit transfer | Map CRED â†’ CLRG (clearing) |
| :32A: | Value Date, Currency, Amount | Settlement Date | /Document/FIToFICstmrCdtTrf/GrpHdr/IntrBkSttlmDt | Date of settlement | Extract date portion (YYMMDD), convert to ISO date format (YYYY-MM-DD) |
| :32A: | Value Date, Currency, Amount | Currency | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/IntrBkSttlmAmt[@Ccy] | ISO currency code | Extract 3-letter currency code (e.g., USD) |
| :32A: | Value Date, Currency, Amount | Amount | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/IntrBkSttlmAmt | Transaction amount | Parse amount, format as decimal with 2 decimal places |
| :32A: | Value Date, Currency, Amount | Control Sum | /Document/FIToFICstmrCdtTrf/GrpHdr/CtrlSum | Sum of all transaction amounts | Same as transaction amount for single transaction |
| :32A: | Value Date, Currency, Amount | Total Settlement Amount | /Document/FIToFICstmrCdtTrf/GrpHdr/TtlIntrBkSttlmAmt | Total amount with currency | Same as transaction amount for single transaction |
| :50K: | Ordering Customer | Debtor Name | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/Dbtr/Nm | Name of ordering customer | Extract name (first line of :50K:) |
| :50K: | Ordering Customer | Debtor Address | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/Dbtr/PstlAdr | Address of ordering customer | Parse address components: street, town, state/province, postal code, country |
| :50K: | Ordering Customer | Debtor Account | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/DbtrAcct/Id/Othr/Id | Account number | Extract account number if present in :50K: |
| :59: | Beneficiary Customer | Creditor Name | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/Cdtr/Nm | Name of beneficiary | Extract beneficiary name (first line of :59:) |
| :59: | Beneficiary Customer | Creditor Address | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/Cdtr/PstlAdr | Address of beneficiary | Parse address: street, town, state/province, postal code, country |
| :59: | Beneficiary Customer | Creditor Account | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/CdtrAcct/Id/Othr/Id | Beneficiary account | Extract account number from :59: field |
| :70: | Remittance Information | Unstructured Remittance | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/RmtInf/Ustrd | Free-text invoice reference | Direct copy of remittance info |
| :71A: | Charges | Charge Bearer | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/ChrgBr | SHA, BEN, or OUR | Direct copy (SHA = shared, BEN = beneficiary pays, OUR = ordering customer pays) |
| Implied | Debtor Agent | Debtor Agent | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/DbtrAgt/FinInstnId/ClrSysMmbId/MmbId | Sending bank identifier | Extract from message context or :52A:/:52D: if present |
| Implied | Creditor Agent | Creditor Agent | /Document/FIToFICstmrCdtTrf/CdtTrfTxInf/CdtrAgt/FinInstnId/ClrSysMmbId/MmbId | Receiving bank identifier | Extract from :57A:/:57D: if present |
| Implied | Number of Transactions | Number of Transactions | /Document/FIToFICstmrCdtTrf/GrpHdr/NbOfTxs | Count of transactions | Set to "1" for single transaction |
| System | Creation Date/Time | Creation Date/Time | /Document/FIToFICstmrCdtTrf/GrpHdr/CreDtTm | ISO timestamp | System-generated current timestamp in ISO 8601 format |

## Data Transformation Rules

### Date Formatting
- **Input**: YYMMDD format (e.g., 230906 for Sept 6, 2023)
- **Output**: YYYY-MM-DD format (e.g., 2023-09-06)
- **Logic**: Add century prefix (20), insert hyphens

### Amount Formatting
- **Input**: May include comma separators (e.g., 12500,00 or 12,500.00)
- **Output**: Decimal format with period separator (e.g., 12500.00)
- **Logic**: Remove commas, ensure two decimal places

### Address Parsing
- **Input**: Multi-line address in :50K: or :59:
- **Output**: Structured address elements (StrtNm, TwnNm, CtrySubDvsn, PstCd, Ctry)
- **Logic**: 
  - Line 1: Street address
  - Line 2: City, State ZIP
  - Parse using regex for state codes and ZIP formats

### Currency Code
- **Input**: 3-letter ISO code in :32A:
- **Output**: 3-letter ISO code in Ccy attribute
- **Logic**: Direct mapping, validate against ISO 4217

### Bank Identifiers
- **Input**: BIC codes or national clearing codes
- **Output**: MmbId in ClrSysMmbId structure
- **Logic**: Direct copy or transformation from BIC to clearing system member ID

## Assumptions and Missing Data Handling

1. **Missing Debtor Agent**: If :52A:/:52D: not present, use placeholder "SENDERBANK"
2. **Missing Creditor Agent**: If :57A:/:57D: not present, use placeholder "RECEIVINGBANK"
3. **Missing Account Numbers**: If not in :50K: or :59:, derive from context or use separate fields
4. **Address Incomplete**: If full address not provided, populate available fields only
5. **Timestamp**: System-generated if not available in legacy message
6. **Settlement Method**: Default to CLRG (clearing) if :23B: is CRED

## Validation Requirements

1. Amount must be positive and properly formatted
2. Currency code must be valid ISO 4217
3. Dates must be valid and in correct format
4. All required ISO 20022 fields must be populated
5. Message ID must be unique
6. Charge bearer must be SHA, BEN, or OUR
